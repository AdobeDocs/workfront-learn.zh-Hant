---
title: 資料結構練習
description: 將資料從來源檔案轉換成目標檔案。(應該介於 60 到 160 個字元之間，但有 58 個字元)
activity: use
team: Technical Marketing
type: Tutorial
feature: Workfront Fusion
role: User
level: Beginner
jira: KT-11054
thumbnail: KT11054.png
recommendations: noDisplay,catalog
exl-id: 06a39a87-23f3-4d4a-995e-d32fb9c5f50d
source-git-commit: f033b210268e8979ee15abe812e6ad85673eeedb
workflow-type: ht
source-wordcount: '1079'
ht-degree: 100%

---

# 資料結構練習

將資料從來源檔案轉換成目標檔案。

## 練習概觀

開啟含有時間記錄清單的 CSV 檔案。這些時間記錄是多位使用者在某幾天內記錄的分鐘數。目標是擷取這些資訊並產生新的 CSV 檔，顯示每位使用者每天記錄的總時數 (以小時為單位)。

![資料結構影像 1](../12-exercises/assets/data-structures-walkthrough-1.png)

![資料結構影像 2](../12-exercises/assets/data-structures-walkthrough-2.png)


在此情境中，您將開啟一個檔案，內含一份工作分鐘數的時間記錄清單，包括日期和時間、已輸入多少分鐘以及記錄者的電子郵件地址。檔案內有 100 筆時間記錄，有些是同一個人記錄，有些是由其他人在同一天記錄。

若要產生顯示每個人每天工作總時數 (以小時為單位) 的檔案，請按照以下步驟操作：

1. 在觸發模組中，從 Workfront 資料夾取得檔案。下載該檔案。
1. 在第一個 CSV 模組中，剖析時間記錄資料，以便為每個時間記錄輸出一個套件。這是一個疊代器。
1. 第一個「工具」模組是數值彙總計算器。此模組會計算所有分鐘數的總和 (SUM)，並先按照電子郵件地址，再按照日期將各列資料分組。其結果是每天的總工作時數，並依電子郵件排序。
1. 第二個「工具」模組是「Set 變數」模組。使用此模組將分鐘格式化，先除以 60 再四捨五入到小數點後兩位。
1. 在第二個 CSV 模組中，設定輸出檔案。
1. 在最後一個模組中，將 CSV 檔案上傳到 Workfront。

## 執行步驟

**從 Workfront 下載檔案。**

1. 在 Workfront 的「Fusion Exercise Files」資料夾中，選取「_Fusion1.0JanTime.csv」然後按一下「文件詳細資料」。
1. 複製 URL 網址中第一個 ID 號碼。
1. 建立新情境。將其命名為「建立和使用資料結構」。
1. 從 Workfront 應用程式中的「下載文件」模組開始。
1. 設定 Workfront 連線並包含從 Workfront URL 複製而來的文件 ID。

   ![資料結構影像 3](../12-exercises/assets/data-structures-walkthrough-3.png)

   **解析時間記錄資料。**

1. 新增另一個模組，選取「剖析 CSV」。
1. 設定對 7 欄執行「剖析 CSV」。勾選「CSV 包含標題」方塊。「分隔符號類型」請選擇「逗號」，並把「資料」放入「CSV」欄位。

   ![資料結構影像 4](../12-exercises/assets/data-structures-walkthrough-4.png)

1. 按一下「執行一次」來檢視輸出。
1. 開啟執行檢查程式來查看「剖析 CSV」模組的輸入和輸出。有一個套件 (CSV 檔案) 作為輸入，並有數個套件作為輸出 (CSV 檔案中每一列有一個套件)。看起來如下所示：

   ![資料結構影像 5](../12-exercises/assets/data-structures-walkthrough-5.png)

   **接下來，將資料轉換成所需的輸出形式，而彙總的時間總計以小時而不是分鐘為單位。**

1. 新增「數值彙總計算器」工具模組。
1. 選取來源模組，即「剖析 CSV 模組」。
1. 選取「SUM」作為彙總函數。
1. 「值」欄位是 CSV 檔案的第 7 欄。這是每個使用者記錄的分鐘數。
1. 若要依照群組將欄位加總，請按一下「進階設定」並設定「分組方式」為「電子郵件」(第 4 欄)、日期 (第 5 欄)。

   + 此操作會將電子郵件和日期的每個組合加總。請務必在第 4 欄和第 5 欄之間加入逗號。之後這個逗號將用作分隔符號。

   **您的對應面板應如下所示：**

   ![資料結構影像 6](../12-exercises/assets/data-structures-walkthrough-6.png)

1. 按一下「執行一次」來檢查彙總輸出。

   **輸出套件應如下所示：**

   ![資料結構影像 7](../12-exercises/assets/data-structures-walkthrough-7.png)

   **現在將已彙總的分鐘數轉換成小時數。**

1. 新增另一個工具模組，選取「Set 變數」。
1. 將變數命名為「時數」。
1. 將變數值設定為 formatNumber(result/60;2;.;,)

   **您的對應面板應如下所示：**

   ![資料結構影像 8](../12-exercises/assets/data-structures-walkthrough-8.png)

   **接下來，取得為輸出檔案設定的值。您想要用使用者 ID 和資料值進行分組。您也想要所計算的時數。**

1. 使用彙總計算器「建立 CSV (進階)」來新增另一個模組「CSV」。
1. 來源模組是「工具 - 數值彙總計算器」。
1. 按一下「資料結構」欄位旁邊的「新增」並將我們的資料結構命名為「已記錄時間的每日總和」。
1. 按一下「新增項目」來新增第一個項目。
1. 將項目命名為「使用者 ID」並設定類型為「文字」。按一下「新增」。
1. 再按一下「新增項目」來建立第二個項目。
1. 將項目命名為「日期」，設定類型為「日期」，並按一下「新增」。
1. 再次按一下「新增項目」。
1. 將項目命名為「時數」，設定類型為「數字」，並按一下「新增」。

   **您的資料結構應如下所示：**

   ![資料結構影像 9](../12-exercises/assets/data-structures-walkthrough-9.png)

1. 按一下「儲存」來完成「已記錄時間的每日總和」資料結構。

   **現在，您為剛才建立的三個欄位提供值。您應該在 CSV 對應面板中看到那三個欄位。**

1. 按一下「使用者 ID」欄位並從一般函數標籤選擇「GET」。在第一個參數中，放入來自文字和二進位函數標籤的 SPLIT。SPLIT 函數的第一個參數是「索引鍵」欄位。新增逗號作為分隔符號，並用「1」作為索引。這表示您希望 GET 檢索「索引鍵」陣列的第一個欄位。
1. 將這個運算式複製到「日期」欄位。將索引從「1」變更為「2」，用 GET 取得陣列中第二個值。
1. 對於「時數」欄位，新增來自「Set 變數」工具的「時數」欄位。

   **您的 CSV 對應面板應如下所示：**

   ![資料結構影像 10](../12-exercises/assets/data-structures-walkthrough-10.png)

   **如果您現在執行情境，您應該會看到以下輸出：**

   ![資料結構影像 11](../12-exercises/assets/data-structures-walkthrough-11.png)

   **現在，新增一個模組來取得這個輸出，並作為文件上傳到 Workfront 的現有專案中。**

1. 在 Workfront 中開啟專案並從 URL 複製專案 ID。
1. 返回 Fusion 中的情境並新增另一個來自 Workfront 應用程式的「上傳文件」模組。
1. 將專案 ID 貼到「相關記錄 ID」欄位。
1. 對「相關記錄類型」請選擇「專案」。
1. 對「來源檔案」請選擇「對應」選項。
1. 對於「文件名稱」，請使用您下載的檔案名稱，並在名稱前面加上「已更新」。
1. 對於檔案內容，請使用「建立 CSV 模組」的「文字輸出」。

   **您的對應面板應如下所示：**

   ![資料結構影像 12](../12-exercises/assets/data-structures-walkthrough-12.png)

1. 按一下「確定」並儲存情境。
1. 按一下「執行一次」來執行情境。

   **檢查「上傳文件」模組的執行檢查程式以確認文件已上傳。**

   ![資料結構影像 13](../12-exercises/assets/data-structures-walkthrough-13.png)
